{% extends 'base.html' %}

{% load static %}

{% load custom_filters %}

{% block 'main-section' %}
<section class="hero-wrap js-fullheight">
    <div class="container-fluid px-0">
        <div class="row d-md-flex no-gutters slider-text align-items-center js-fullheight justify-content-end">
            <div class="one-forth d-flex align-items-center ftco-animate js-fullheight">
                <div class="text">
                    <h1 class="text-center" id="hero-main-text">
                        Tigray Data Repository</h1>
                    <p class="text-center">
                        The Tigray Data Repository is a dedicated digital platform aimed at collecting, preserving,
                        and providing access to data related to Tigray, including cultural, historical,
                        socioeconomic, and geographical information. </p>
                    <p class="text-center">
                        <a href="#" class="btn btn-primary py-3 px-4""><span class=" fa fa-dollar-sign"></span>
                            Donate to Us
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="ftco-section ftco-no-pt">
    <div class="container">
        <div class="container mt-5">
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="card" id="slideFromLeft">
                        <div class="card-header bg-default text-white">
                        <h4 class="mb-0"><strong>Available Datasets</strong></h4>
                    </div>
                        <div class="card-body p-0">
                            <table class="table table-hover">
                                <tbody>
                                    {% for group in repository_groups %}
                                    <tr data-widget="expandable-table" aria-expanded="false">
                                        <td>
                                            <i class="expandable-table-caret fas fa-caret-right fa-fw"></i>
                                            <i class="fa fa-folder me-2" aria-hidden="true" style="font-size: 1.1rem; color: #428bca;"></i> 
                                            {{ group.name }}
                                        </td>
                                    </tr>
                                    <tr class="expandable-body">
                                        <td>
                                            <div class="p-0">
                                                <table class="table table-hover">
                                                    <tbody>
                                                        {% for item in group.repositories.all %}
                                                        <tr>
                                                            <td class="text-sm">
                                                                <i class="fa fa-file me-2" aria-hidden="true" style="color: #666;"></i> 
                                                                {{ item.file.name|basename }}
                                                            </td>
                                                            <td class="text-sm float-right">
                                                                <a href="" class="badge badge-warning">View</a>
                                                                <a href="" class="badge badge-success">Download</a>
                                                            </td>
                                                        </tr>
                                                        {% empty %}
                                                        <tr>
                                                            <td>No datasets available for this repository.</td>
                                                        </tr>
                                                        {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                                                      
                        </div>
                        <!-- /.card-body -->
                      </div>
                      <!-- /.card -->
                </div>

                <div class="col-md-4">
                    <div class="card" id="slideFromRight">
                        <div class="card-header bg-default text-white">
                            <h4 class="mb-0"><strong>Useful Links</strong></h4>
                        </div>
                        <div class="card-body">
                            <p class="card-text">
                                Interactive dashboard about the initiatives and organisations that our diaspora
                                community has been part of.
                            </p>
                            <div class="d-flex justify-content-center">
                                <a href="#" class="btn" style="background-color: #428bca;  border: #428bca;">Read
                                    More...</a>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>

    </div>
</section>

<!-- Page Specfic Animation Script -->
<script>
    // Slide in the card from the left
    gsap.from("#slideFromLeft", { x: -300, opacity: 0, duration: 1 });

    // Slide in the card from the right
    gsap.from("#slideFromRight", { x: 300, opacity: 0, duration: 1 });
</script>
{% endblock %}