{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tigray Data Repository</title>
    <link
      rel="shortcut icon"
      href="{% static 'img/Tigray_logo2.png' %}"
      type="image/x-icon"
    />

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <!-- Theme style -->
    <link
      rel="stylesheet"
      href="{% static 'admin_static/css/adminlte.min.css' %}"
    />
  </head>

  <body class="hold-transition login-page" style="background-color: white">
    
    <div class="login-box">
        <div class="card card-outline card-primary">
            <div class="card-header text-center">
              <a href="{% url 'index' %}" target="_blank" class="h1">
                <img
                  src="{% static 'img/output-onlinepngtools.png' %}"
                  style="width: 100%"
                  alt=""
                />
              </a>
            </div>
            <div class="card-body login-card-body">
                <p class="login-box-msg">Please enter your new password below.</p>
    
                {% if validlink %}
                    <form method="post">
                        {% csrf_token %}
                        <div class="input-group mb-3">
                            <input type="password" name="new_password1" class="form-control" placeholder="New password" required>
                            <div class="input-group-append">
                                <div class="input-group-text">
                                    <span class="fas fa-lock"></span>
                                </div>
                            </div>
                        </div>
    
                        <div class="input-group mb-3">
                            <input type="password" name="new_password2" class="form-control" placeholder="Confirm password" required>
                            <div class="input-group-append">
                                <div class="input-group-text">
                                    <span class="fas fa-lock"></span>
                                </div>
                            </div>
                        </div>
    
                        <div class="row">
                            <div class="col-12">
                                <button type="submit" class="btn btn-success btn-block">Reset Password</button>
                            </div>
                        </div>
                    </form>
                {% else %}
                    <div class="alert alert-danger">
                        The password reset link is invalid, possibly because it has already been used. Please request a new password reset.
                    </div>
                    <div class="text-center mt-3">
                        <a href="{% url 'forgot-password' %}" class="btn btn-primary btn-block">Request new password</a>
                    </div>
                {% endif %}
    
                <p class="mt-3 mb-1">
                    <a href="{% url 'sign-in' %}">Return to Sign In</a>
                </p>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- AdminLTE App -->
    <script src="{% static 'admin_static/js/adminlte.min.js' %}"></script>
  </body>
</html>
